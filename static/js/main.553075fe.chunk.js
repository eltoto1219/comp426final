(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{221:function(e,t,n){},222:function(e,t,n){},338:function(e,t){},380:function(e,t){},422:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(214),s=n.n(c),o=(n(221),n(222),n(4)),i=n.n(o),l=n(43),u=n(52),d=n(53),h=n(101),j=n(55),b=n(54),p=n(102),x=n.n(p),m=n(2),O=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={},a.helloWorld=a.helloWorld.bind(Object(h.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://18.215.154.83/token").then((function(e){return console.log("here"),e})).catch((function(e){console.log(e)}));case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"helloWorld",value:function(){console.log("wtf")}},{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h2",{children:"why"})})}}]),n}(r.a.Component),f=n(141),g=n(15),v=n(88),k=n(140),y=n(42),w=(n(106),function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).login=function(){var e=a.state,t=e.email,n=e.room;t&&n&&a.props.history.push("chat",{room:n,email:t})},a.handleChange=function(e){a.setState(Object(v.a)({},e.target.name,e.target.value))},a.state={email:"",room:""},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.room;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(y.a,{children:[Object(m.jsx)(y.a.Header,{children:"Enter A Room"}),Object(m.jsxs)(y.a.Body,{children:[Object(m.jsx)("input",{name:"email",required:!0,label:"Email address",placeholder:"Enter email address",variant:"outlined",type:"email",value:t,onChange:this.handleChange}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{name:"room",required:!0,label:"Room",placeholder:"Enter room name",variant:"outlined",value:n,onChange:this.handleChange}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)(k.a,{variant:"primary",onClick:this.login,children:"Login"})]})]})})}}]),n}(r.a.Component)),C=n(216),S=n(62);var E=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.email,a=t.author===n;return Object(m.jsx)(S.a.Item,{children:Object(m.jsxs)("div",{style:T.container(a),children:[t.body,Object(m.jsx)("div",{style:T.author(a),children:t.author})]})})}}]),n}(r.a.Component),T={container:function(e){return{maxWidth:"100%",borderRadius:12,padding:8,color:"white",fontSize:14,backgroundColor:e?"grey":"blue",float:e?"right":"left"}},author:function(e){var t;return t={flexDirection:"column",fontSize:10},Object(v.a)(t,"fontSize",8),Object(v.a)(t,"color","white"),t},timestamp:{fontSize:8,color:"white",textAlign:"right",paddingTop:4}},M=E,A=n(103),F=n(70),q=n(243),B=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(l.a)(i.a.mark((function e(){var t,n,r,c,s,o,u,d,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.location,n=(t||{}).state,c=(r=n||{}).email,s=r.room,c&&s||a.props.history.replace("/"),o="",e.prev=5,e.next=8,a.getToken(c);case 8:o=e.sent,e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),new Error("Unable to get token, please reload this page");case 14:return e.next=16,q.Client.create(o);case 16:return(u=e.sent).on("tokenAboutToExpire",Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getToken(c);case 2:t=e.sent,u.updateToken(t);case 4:case"end":return e.stop()}}),e)})))),u.on("tokenExpired",Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getToken(c);case 2:t=e.sent,u.updateToken(t);case 4:case"end":return e.stop()}}),e)})))),u.on("channelJoined",function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMessages();case 2:n=e.sent,a.setState({messages:n.items||[]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.prev=20,e.next=23,u.getChannelByUniqueName(s);case 23:d=e.sent,a.joinChannel(d),e.next=39;break;case 27:return e.prev=27,e.t1=e.catch(20),e.prev=29,e.next=32,u.createChannel({uniqueName:s,friendlyName:s});case 32:h=e.sent,a.joinChannel(h),e.next=39;break;case 36:throw e.prev=36,e.t2=e.catch(29),new Error("Unable to create channel, please reload this page");case 39:case"end":return e.stop()}}),e,null,[[5,11],[20,27],[29,36]])}))),a.getToken=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://18.215.154.83/token/".concat(t));case 2:return n=e.sent,a=n.data,console.log("wweee"),e.abrupt("return",a.token);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.joinChannel=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("joined"===t.channelState.status){e.next=3;break}return e.next=3,t.join();case 3:a.setState({channel:t,loading:!1}),t.on("messageAdded",a.handleMessageAdded);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleMessageAdded=function(e){var t=a.state.messages;a.setState({messages:[].concat(Object(C.a)(t),[e])})},a.sendMessage=function(){var e=a.state,t=e.text,n=e.channel;t&&(a.setState({loading:!0}),n.sendMessage(String(t).trim()),a.setState({text:"",loading:!1}))},a.state={text:"",messages:[],loading:!1,channel:null},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=(t.loading,t.text),a=t.messages,r=t.channel,c=(this.props.location||{}).state||{},s=c.email,o=c.room;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(S.a,{children:Object(m.jsxs)(y.a,{children:[Object(m.jsx)(y.a.Header,{children:"Room: ".concat(o,", User: ").concat(s)}),Object(m.jsxs)(y.a.Body,{children:[Object(m.jsx)(S.a,{children:Object(m.jsx)(S.a,{children:a&&a.map((function(e){return Object(m.jsx)(M,{message:e,email:s},e.index)}))})}),Object(m.jsxs)(A.a,{children:[Object(m.jsx)(F.a,{xs:12,md:8,children:Object(m.jsx)("input",{required:!0,style:R.message,placeholder:"Enter message",variant:"outlined",rows:2,value:n,disabled:!r,onChange:function(t){return e.setState({text:t.target.value})}})}),Object(m.jsx)(F.a,{xs:6,md:4,children:Object(m.jsx)("input",{variant:"primary",value:"send",type:"button",style:R.message,onClick:this.sendMessage,disabled:!r})})]})]})]})})})}}]),n}(r.a.Component),R={message:{display:"block",width:"100%",borderRadius:12,padding:-4}},z=B;var D=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(f.a,{children:[Object(m.jsxs)(A.a,{children:[Object(m.jsx)(F.a,{xs:8,md:2,children:Object(m.jsxs)("div",{children:[" ",Object(m.jsx)(f.b,{to:"/",children:"Lobby"})]})}),Object(m.jsx)(F.a,{xs:8,md:2})]}),Object(m.jsx)("hr",{}),Object(m.jsxs)(g.d,{children:[Object(m.jsx)(g.b,{path:"/lobby",component:w}),Object(m.jsx)(g.b,{path:"/test",component:O}),Object(m.jsx)(g.b,{path:"/chat",component:z}),Object(m.jsx)(g.b,{exact:!0,path:"/",children:Object(m.jsx)(g.a,{to:"/lobby"})})]})]})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,424)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(D,{})}),document.getElementById("root")),L()}},[[422,1,2]]]);
//# sourceMappingURL=main.553075fe.chunk.js.map