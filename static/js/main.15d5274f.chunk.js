(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{224:function(e,t,n){},225:function(e,t,n){},347:function(e,t){},389:function(e,t){},424:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(217),s=n.n(c),o=(n(224),n(225),n(74)),i=n(16),l=n(71),u=n(219),j=n(4),h=n.n(j),d=n(30),p=n(40),b=n(41),x=n(43),m=n(42),O=n(73),f=n.n(O),g=(n(75),n(63)),v=n(1),k=function(e){Object(x.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.email,a=t.author===n;return Object(v.jsx)(g.a.Item,{children:Object(v.jsxs)("div",{style:w.container(a),children:[t.body,Object(v.jsx)("div",{style:w.author(a),children:t.author})]})})}}]),n}(r.a.Component),w={container:function(e){return{maxWidth:"100%",borderRadius:12,padding:8,color:"white",fontSize:14,backgroundColor:e?"grey":"blue",float:e?"right":"left"}},author:function(e){return{flexDirection:"column",fontSize:8,color:"white"}},timestamp:{fontSize:8,color:"white",textAlign:"right",paddingTop:4}},y=k,C=n(26),S=n(93),T=n(56),A={url:{API_URL:"https://www.iwantadomainplz.com"}},E=n(107),L=n(72),R=function(e){Object(x.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).pushEmail=function(){var e=((a.props.location||{}).state||{}).email;a.props.history.replace("/profile",{email:e})},a.state={email:a.email},a.pushEmail=a.pushEmail.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"render",value:function(){return((this.props.location||{}).state||{}).email?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("br",{}),Object(v.jsxs)(S.a,{children:[Object(v.jsx)(T.a,{xs:8,md:2,children:Object(v.jsx)(o.b,{to:"/login",children:"Logout"})}),Object(v.jsx)(T.a,{xs:8,md:2,children:Object(v.jsx)(L.a,{variant:"link",onClick:this.pushEmail,to:"/profile",children:"Profile"})})]}),Object(v.jsx)("hr",{})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("br",{}),Object(v.jsxs)(S.a,{children:[Object(v.jsx)(T.a,{xs:8,md:2,children:Object(v.jsx)(o.b,{to:"/login",children:"Login"})}),Object(v.jsx)(T.a,{xs:8,md:2,children:Object(v.jsx)(o.b,{to:"/profile",children:"Profile"})})]}),Object(v.jsx)("hr",{})]})}}]),n}(r.a.Component),I=n(155),P=function(e){Object(x.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(d.a)(h.a.mark((function e(){var t,n,r,c,s,o,i,l,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.location,n=(t||{}).state,c=(r=n||{}).email,s=r.room,c&&s||a.props.history.replace("/"),o="",e.prev=5,e.next=8,a.getToken(c);case 8:o=e.sent,e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),new Error("cant get token");case 14:return e.next=16,I.Client.create(o);case 16:return(i=e.sent).on("tokenAboutToExpire",Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getToken(c);case 2:t=e.sent,i.updateToken(t);case 4:case"end":return e.stop()}}),e)})))),i.on("tokenExpired",Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getToken(c);case 2:t=e.sent,i.updateToken(t);case 4:case"end":return e.stop()}}),e)})))),i.on("channelJoined",function(){var e=Object(d.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMessages();case 2:n=e.sent,a.setState({messages:n.items||[]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.prev=20,e.next=23,i.getChannelByUniqueName(s);case 23:l=e.sent,a.joinChannel(l),e.next=39;break;case 27:return e.prev=27,e.t1=e.catch(20),e.prev=29,e.next=32,i.createChannel({uniqueName:s,friendlyName:s});case 32:u=e.sent,a.joinChannel(u),e.next=39;break;case 36:throw e.prev=36,e.t2=e.catch(29),new Error("cant create a channel");case 39:case"end":return e.stop()}}),e,null,[[5,11],[20,27],[29,36]])}))),a.getToken=function(){var e=Object(d.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(A.url.API_URL,"/token/").concat(t));case 2:return n=e.sent,a=n.data,console.log("we request from this domoain: ".concat(A.url.API_URL)),e.abrupt("return",a.token);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.joinChannel=function(){var e=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("joined"===t.channelState.status){e.next=3;break}return e.next=3,t.join();case 3:a.setState({channel:t,loading:!1}),t.on("messageAdded",a.handleMessageAdded);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleMessageAdded=function(e){var t=a.state.messages;a.setState({messages:[].concat(Object(u.a)(t),[e])})},a.sendMessage=function(){var e=a.state,t=e.text,n=e.channel;t&&(a.setState({loading:!0}),n.sendMessage(String(t).trim()),a.setState({text:"",loading:!1}))},a.state={text:"",messages:[],loading:!1,channel:null},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=(t.loading,t.text),a=t.messages,r=t.channel,c=(this.props.location||{}).state||{},s=c.email,o=c.room;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(R,Object(l.a)({},this.props)),Object(v.jsx)(g.a,{children:Object(v.jsxs)(C.a,{children:[Object(v.jsx)(C.a.Header,{children:"Room: ".concat(o,", User: ").concat(s)}),Object(v.jsxs)(C.a.Body,{children:[Object(v.jsx)(g.a,{children:Object(v.jsx)(g.a,{children:a&&a.map((function(e){return Object(v.jsx)(y,{message:e,email:s},e.index)}))})}),Object(v.jsxs)(S.a,{children:[Object(v.jsx)(T.a,{xs:12,md:8,children:Object(v.jsx)("input",{required:!0,style:U.message,placeholder:"Enter message",variant:"outlined",rows:2,value:n,disabled:!r,onChange:function(t){return e.setState({text:t.target.value})}})}),Object(v.jsx)(T.a,{xs:6,md:4,children:Object(v.jsx)("input",{variant:"primary",value:"send",type:"button",style:U.message,onClick:this.sendMessage,disabled:!r})})]})]})]})})]})}}]),n}(r.a.Component),U={message:{display:"block",width:"100%",borderRadius:12,padding:-4}},F=P,M=n(108),B=n(155),q=function(e){Object(x.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(d.a)(h.a.mark((function e(){var t,n,r,c,s,o,i,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.location,n=(t||{}).state,c=(r=n||{}).email,r.room,s="",o="",i="","",c||a.props.history.replace("/login"),e.prev=8,e.next=11,a.getToken(c);case 11:s=e.sent,e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(8),window.location.reload(),new Error("cant get token");case 18:return e.next=20,B.Client.create(s);case 20:return(l=e.sent).on("tokenAboutToExpire",Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getToken(c);case 2:t=e.sent,l.updateToken(t);case 4:case"end":return e.stop()}}),e)})))),l.on("tokenExpired",Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getToken(c);case 2:t=e.sent,l.updateToken(t);case 4:case"end":return e.stop()}}),e)})))),e.prev=23,e.next=26,a.getUserInfo(c);case 26:o=e.sent,e.next=32;break;case 29:e.prev=29,e.t1=e.catch(23),window.location.reload();case 32:return e.prev=32,e.next=35,f.a.get("".concat(A.url.API_URL,"/random"));case 35:i=e.sent,a.setState({room:i.data}),e.next=42;break;case 39:e.prev=39,e.t2=e.catch(32),alert("cannot make room");case 42:a.setState({name:c,channels:o.channels,created:o.created,newroom:i.data});case 43:case"end":return e.stop()}}),e,null,[[8,14],[23,29],[32,39]])}))),a.getToken=function(){var e=Object(d.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(A.url.API_URL,"/token/").concat(t));case 2:return n=e.sent,a=n.data,e.abrupt("return",a.token);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getUserInfo=function(){var e=Object(d.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(A.url.API_URL,"/user/").concat(t));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){a.setState({room:e.target.value})},a.createjoin=function(){var e=((a.props.location||{}).state||{}).email,t=a.state.room;console.log(a.props.history),e&&t&&a.props.history.push("chat",{room:t,email:e})},a.state={channels:"",created:"",room:"",newroom:""},a}return Object(b.a)(n,[{key:"render",value:function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(R,Object(l.a)({},this.props)),Object(v.jsx)(M.a,{children:Object(v.jsxs)(C.a,{children:[Object(v.jsxs)(C.a.Header,{children:["You Are: ",this.state.name,Object(v.jsx)("br",{}),"You are in ",this.state.channels," channels",Object(v.jsx)("br",{}),"You were born at ",this.state.created]}),Object(v.jsx)(C.a.Body,{children:Object(v.jsxs)(C.a,{children:[Object(v.jsx)(C.a.Header,{children:"Join A Channel"}),Object(v.jsxs)(C.a.Body,{children:[Object(v.jsx)("input",{name:"room",required:!0,label:"Room",placeholder:"Enter room name",variant:"outlined",value:this.state.room,onChange:this.handleChange}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(L.a,{variant:"primary",onClick:this.createjoin,children:"Create/Join"})]})]})})]})})]})}}]),n}(r.a.Component),_=n(106),J=function(e){Object(x.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).login=function(){var e=a.state.email;console.log(e),""!==e&&a.props.history.push("/profile",{email:e})},a.handleChange=function(e){a.setState(Object(_.a)({},e.target.name,e.target.value))},a.state={email:""},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state.email;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(R,Object(l.a)({},this.props)),Object(v.jsx)(M.a,{children:Object(v.jsxs)(C.a,{children:[Object(v.jsx)(C.a.Header,{children:"Login or Register Account"}),Object(v.jsxs)(C.a.Body,{children:[Object(v.jsx)("input",{name:"email",required:!0,label:"Email address",placeholder:"Enter email address",variant:"outlined",type:e,onChange:this.handleChange}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(L.a,{style:N.button,className:"btn-primary",variant:"primary",onClick:this.login,children:"Login"})]})]})})]})}}]),n}(r.a.Component),N={button:{display:"flex",marginRight:"auto",marginLeft:"auto"}},z=J;var D=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(o.a,{children:Object(v.jsxs)(i.d,{children:[Object(v.jsx)(i.b,{path:"/login",component:z}),Object(v.jsx)(i.b,{path:"/chat",component:F}),Object(v.jsx)(i.b,{path:"/profile",component:q}),Object(v.jsx)(i.b,{exact:!0,path:"/",children:Object(v.jsx)(i.a,{to:"/login"})})]})})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,425)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(D,{})}),document.getElementById("root")),H()}},[[424,1,2]]]);
//# sourceMappingURL=main.15d5274f.chunk.js.map